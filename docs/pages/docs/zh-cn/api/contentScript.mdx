---
title: API/ContentScript
---

# `ContentScript`

## `ContentScript.bootstrap(scripts: Array<{ class: new () => ContentScript; groupId?: string }>): void`

初始化 contentScript 相关功能

## `frameList$: Subject<FrameList>`

一个 rxjs Subject，值为当前建立连接的所有 frame

## `port`

- `port.background: <T>(id: string, data?: T) => void`
- `port.contentScript: <T>(id: string, data?: T, filter?: MessageFilters) => void`
- `port.devtools: <T>(id: string, data?: T, filter?: MessageFilters) => void`
- `port.pageScript: <T>(id: string, data?: T, filter?: MessageFilters) => void`
- `port.popup: <T>(id: string, data?: T, filter?: MessageFilters) => void`

向对应的 context 发送消息，其中，

```ts
interface MessageFilters {
  groupId?: string | number; // 用户自定义的 ID
  tabId?: number;
  windowId?: number;
  origin?: string;
  url?: string;
  frameId?: number;
  devtoolsId?: string;
  className?: string;
}
```

## `on(id: string, cb: (data: any, sender: MessageFilters | undefined, timestamp: number) => void, filters?: MessageFilters): void`

监听消息，其中，`cb` 中的 `sender` 代表消息的发送方的信息，`filters` 可以通过过滤指定只接受某些特定的消息

## `injectPageScript(path: string): void`

向页面注入 script
